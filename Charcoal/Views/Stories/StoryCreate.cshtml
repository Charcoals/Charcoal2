@model Charcoal.Models.StoryViewModel
<script type="text/javascript">
    
    //TODO: use knockout js for data binding
    function CreateStory() {
        //projectId, title, description, estimate, iterationType, storytype, status
        var projectId = 7;
        var title = $("#createStoryBody").text();
        $.ajax({
            url: "/Stories/CreateStory",
            type: "POST",
            data: 'projectId=' + projectId + '&title=' + title + '&description=' + 'f'
            + 'estimate=' + 'f' + '&iterationType=' + 'f'
            + '&storytype=' + 'f' + '&status=' + 'f',
            success: function (data) {
                $("#storyTable").append($(data));
                $('#newstory').modal('hide');
                //alert(data);
            },
            error: function (xhr, textStatus, error) {
                alert('ajax:failure', [xhr, status, error]);
            }
        });
    }

</script>
<div class="modal-form">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            ×</button>
        <h3 id="myModalLabel">
            Edit Story</h3>
    </div>
    <div class="modal-body container-fluid" id="createStoryBody">
        @Html.HiddenFor(model => model.Id)
        @*<div class="hidden" id="projectId">@Model.ProjectId</div>*@
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.Title)
            </div>
            <div class="controls" id="title">
                @Html.EditorFor(model => model.Title)
                @Html.ValidationMessageFor(model => model.Title)
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.Description)
            </div>
            <div class="controls">
                @Html.EditorFor(model => model.Description)
                @Html.ValidationMessageFor(model => model.Description)
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.Estimate)
            </div>
            <div class="controls">
                @Html.EditorFor(model => model.Estimate)
                @Html.ValidationMessageFor(model => model.Estimate)
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.Status)
            </div>
            <div class="controls">
                @Html.DropDownListFor(e => e.Status, Model.Statuses)
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.IterationType)
            </div>
            <div class="controls">
                @Html.DropDownListFor(e => e.IterationType, Model.IterationTypes)
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">
                @Html.LabelFor(model => model.StoryType)
            </div>
            <div class="controls">
                @Html.DropDownListFor(e => e.StoryType, Model.StoryTypes)
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">
            Close</button>
        <button type="submit" class="btn btn-primary" value="Save" 
                onclick="CreateStory()">Create</button>
               
        @*onclick="CreateStory(@Model.ProjectId,'@Html.Raw(@Model.Title)', '@Html.Raw(@Model.Description)',@Model.Estimate,@Html.Raw(@Model.IterationType.ToString())','@Html.Raw(@Model.StoryType.ToString())', '@Html.Raw(@Model.Status.ToString())')" />*@
    </div>

</div>